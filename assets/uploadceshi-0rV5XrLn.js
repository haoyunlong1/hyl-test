import{k as E,b as x,e as U,f as C,h as L,F as $,l as q,m as D,t as j}from"./index-BL72d3rg.js";var F={exports:{}},z;function N(){return z||(z=1,(function(M,l){(function(y){M.exports=y()})(function(y){var A=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function h(i,a){var r=i[0],t=i[1],n=i[2],e=i[3];r+=(t&n|~t&e)+a[0]-680876936|0,r=(r<<7|r>>>25)+t|0,e+=(r&t|~r&n)+a[1]-389564586|0,e=(e<<12|e>>>20)+r|0,n+=(e&r|~e&t)+a[2]+606105819|0,n=(n<<17|n>>>15)+e|0,t+=(n&e|~n&r)+a[3]-1044525330|0,t=(t<<22|t>>>10)+n|0,r+=(t&n|~t&e)+a[4]-176418897|0,r=(r<<7|r>>>25)+t|0,e+=(r&t|~r&n)+a[5]+1200080426|0,e=(e<<12|e>>>20)+r|0,n+=(e&r|~e&t)+a[6]-1473231341|0,n=(n<<17|n>>>15)+e|0,t+=(n&e|~n&r)+a[7]-45705983|0,t=(t<<22|t>>>10)+n|0,r+=(t&n|~t&e)+a[8]+1770035416|0,r=(r<<7|r>>>25)+t|0,e+=(r&t|~r&n)+a[9]-1958414417|0,e=(e<<12|e>>>20)+r|0,n+=(e&r|~e&t)+a[10]-42063|0,n=(n<<17|n>>>15)+e|0,t+=(n&e|~n&r)+a[11]-1990404162|0,t=(t<<22|t>>>10)+n|0,r+=(t&n|~t&e)+a[12]+1804603682|0,r=(r<<7|r>>>25)+t|0,e+=(r&t|~r&n)+a[13]-40341101|0,e=(e<<12|e>>>20)+r|0,n+=(e&r|~e&t)+a[14]-1502002290|0,n=(n<<17|n>>>15)+e|0,t+=(n&e|~n&r)+a[15]+1236535329|0,t=(t<<22|t>>>10)+n|0,r+=(t&e|n&~e)+a[1]-165796510|0,r=(r<<5|r>>>27)+t|0,e+=(r&n|t&~n)+a[6]-1069501632|0,e=(e<<9|e>>>23)+r|0,n+=(e&t|r&~t)+a[11]+643717713|0,n=(n<<14|n>>>18)+e|0,t+=(n&r|e&~r)+a[0]-373897302|0,t=(t<<20|t>>>12)+n|0,r+=(t&e|n&~e)+a[5]-701558691|0,r=(r<<5|r>>>27)+t|0,e+=(r&n|t&~n)+a[10]+38016083|0,e=(e<<9|e>>>23)+r|0,n+=(e&t|r&~t)+a[15]-660478335|0,n=(n<<14|n>>>18)+e|0,t+=(n&r|e&~r)+a[4]-405537848|0,t=(t<<20|t>>>12)+n|0,r+=(t&e|n&~e)+a[9]+568446438|0,r=(r<<5|r>>>27)+t|0,e+=(r&n|t&~n)+a[14]-1019803690|0,e=(e<<9|e>>>23)+r|0,n+=(e&t|r&~t)+a[3]-187363961|0,n=(n<<14|n>>>18)+e|0,t+=(n&r|e&~r)+a[8]+1163531501|0,t=(t<<20|t>>>12)+n|0,r+=(t&e|n&~e)+a[13]-1444681467|0,r=(r<<5|r>>>27)+t|0,e+=(r&n|t&~n)+a[2]-51403784|0,e=(e<<9|e>>>23)+r|0,n+=(e&t|r&~t)+a[7]+1735328473|0,n=(n<<14|n>>>18)+e|0,t+=(n&r|e&~r)+a[12]-1926607734|0,t=(t<<20|t>>>12)+n|0,r+=(t^n^e)+a[5]-378558|0,r=(r<<4|r>>>28)+t|0,e+=(r^t^n)+a[8]-2022574463|0,e=(e<<11|e>>>21)+r|0,n+=(e^r^t)+a[11]+1839030562|0,n=(n<<16|n>>>16)+e|0,t+=(n^e^r)+a[14]-35309556|0,t=(t<<23|t>>>9)+n|0,r+=(t^n^e)+a[1]-1530992060|0,r=(r<<4|r>>>28)+t|0,e+=(r^t^n)+a[4]+1272893353|0,e=(e<<11|e>>>21)+r|0,n+=(e^r^t)+a[7]-155497632|0,n=(n<<16|n>>>16)+e|0,t+=(n^e^r)+a[10]-1094730640|0,t=(t<<23|t>>>9)+n|0,r+=(t^n^e)+a[13]+681279174|0,r=(r<<4|r>>>28)+t|0,e+=(r^t^n)+a[0]-358537222|0,e=(e<<11|e>>>21)+r|0,n+=(e^r^t)+a[3]-722521979|0,n=(n<<16|n>>>16)+e|0,t+=(n^e^r)+a[6]+76029189|0,t=(t<<23|t>>>9)+n|0,r+=(t^n^e)+a[9]-640364487|0,r=(r<<4|r>>>28)+t|0,e+=(r^t^n)+a[12]-421815835|0,e=(e<<11|e>>>21)+r|0,n+=(e^r^t)+a[15]+530742520|0,n=(n<<16|n>>>16)+e|0,t+=(n^e^r)+a[2]-995338651|0,t=(t<<23|t>>>9)+n|0,r+=(n^(t|~e))+a[0]-198630844|0,r=(r<<6|r>>>26)+t|0,e+=(t^(r|~n))+a[7]+1126891415|0,e=(e<<10|e>>>22)+r|0,n+=(r^(e|~t))+a[14]-1416354905|0,n=(n<<15|n>>>17)+e|0,t+=(e^(n|~r))+a[5]-57434055|0,t=(t<<21|t>>>11)+n|0,r+=(n^(t|~e))+a[12]+1700485571|0,r=(r<<6|r>>>26)+t|0,e+=(t^(r|~n))+a[3]-1894986606|0,e=(e<<10|e>>>22)+r|0,n+=(r^(e|~t))+a[10]-1051523|0,n=(n<<15|n>>>17)+e|0,t+=(e^(n|~r))+a[1]-2054922799|0,t=(t<<21|t>>>11)+n|0,r+=(n^(t|~e))+a[8]+1873313359|0,r=(r<<6|r>>>26)+t|0,e+=(t^(r|~n))+a[15]-30611744|0,e=(e<<10|e>>>22)+r|0,n+=(r^(e|~t))+a[6]-1560198380|0,n=(n<<15|n>>>17)+e|0,t+=(e^(n|~r))+a[13]+1309151649|0,t=(t<<21|t>>>11)+n|0,r+=(n^(t|~e))+a[4]-145523070|0,r=(r<<6|r>>>26)+t|0,e+=(t^(r|~n))+a[11]-1120210379|0,e=(e<<10|e>>>22)+r|0,n+=(r^(e|~t))+a[2]+718787259|0,n=(n<<15|n>>>17)+e|0,t+=(e^(n|~r))+a[9]-343485551|0,t=(t<<21|t>>>11)+n|0,i[0]=r+i[0]|0,i[1]=t+i[1]|0,i[2]=n+i[2]|0,i[3]=e+i[3]|0}function s(i){var a=[],r;for(r=0;r<64;r+=4)a[r>>2]=i.charCodeAt(r)+(i.charCodeAt(r+1)<<8)+(i.charCodeAt(r+2)<<16)+(i.charCodeAt(r+3)<<24);return a}function d(i){var a=[],r;for(r=0;r<64;r+=4)a[r>>2]=i[r]+(i[r+1]<<8)+(i[r+2]<<16)+(i[r+3]<<24);return a}function g(i){var a=i.length,r=[1732584193,-271733879,-1732584194,271733878],t,n,e,o,p,c;for(t=64;t<=a;t+=64)h(r,s(i.substring(t-64,t)));for(i=i.substring(t-64),n=i.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)e[t>>2]|=i.charCodeAt(t)<<(t%4<<3);if(e[t>>2]|=128<<(t%4<<3),t>55)for(h(r,e),t=0;t<16;t+=1)e[t]=0;return o=a*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),p=parseInt(o[2],16),c=parseInt(o[1],16)||0,e[14]=p,e[15]=c,h(r,e),r}function _(i){var a=i.length,r=[1732584193,-271733879,-1732584194,271733878],t,n,e,o,p,c;for(t=64;t<=a;t+=64)h(r,d(i.subarray(t-64,t)));for(i=t-64<a?i.subarray(t-64):new Uint8Array(0),n=i.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)e[t>>2]|=i[t]<<(t%4<<3);if(e[t>>2]|=128<<(t%4<<3),t>55)for(h(r,e),t=0;t<16;t+=1)e[t]=0;return o=a*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),p=parseInt(o[2],16),c=parseInt(o[1],16)||0,e[14]=p,e[15]=c,h(r,e),r}function m(i){var a="",r;for(r=0;r<4;r+=1)a+=A[i>>r*8+4&15]+A[i>>r*8&15];return a}function u(i){var a;for(a=0;a<i.length;a+=1)i[a]=m(i[a]);return i.join("")}u(g("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function i(a,r){return a=a|0||0,a<0?Math.max(a+r,0):Math.min(a,r)}ArrayBuffer.prototype.slice=function(a,r){var t=this.byteLength,n=i(a,t),e=t,o,p,c,I;return r!==y&&(e=i(r,t)),n>e?new ArrayBuffer(0):(o=e-n,p=new ArrayBuffer(o),c=new Uint8Array(p),I=new Uint8Array(this,n,o),c.set(I),p)}})();function v(i){return/[\u0080-\uFFFF]/.test(i)&&(i=unescape(encodeURIComponent(i))),i}function S(i,a){var r=i.length,t=new ArrayBuffer(r),n=new Uint8Array(t),e;for(e=0;e<r;e+=1)n[e]=i.charCodeAt(e);return a?n:t}function w(i){return String.fromCharCode.apply(null,new Uint8Array(i))}function B(i,a,r){var t=new Uint8Array(i.byteLength+a.byteLength);return t.set(new Uint8Array(i)),t.set(new Uint8Array(a),i.byteLength),t}function b(i){var a=[],r=i.length,t;for(t=0;t<r-1;t+=2)a.push(parseInt(i.substr(t,2),16));return String.fromCharCode.apply(String,a)}function f(){this.reset()}return f.prototype.append=function(i){return this.appendBinary(v(i)),this},f.prototype.appendBinary=function(i){this._buff+=i,this._length+=i.length;var a=this._buff.length,r;for(r=64;r<=a;r+=64)h(this._hash,s(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},f.prototype.end=function(i){var a=this._buff,r=a.length,t,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e;for(t=0;t<r;t+=1)n[t>>2]|=a.charCodeAt(t)<<(t%4<<3);return this._finish(n,r),e=u(this._hash),i&&(e=b(e)),this.reset(),e},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},f.prototype.setState=function(i){return this._buff=i.buff,this._length=i.length,this._hash=i.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(i,a){var r=a,t,n,e;if(i[r>>2]|=128<<(r%4<<3),r>55)for(h(this._hash,i),r=0;r<16;r+=1)i[r]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(t[2],16),e=parseInt(t[1],16)||0,i[14]=n,i[15]=e,h(this._hash,i)},f.hash=function(i,a){return f.hashBinary(v(i),a)},f.hashBinary=function(i,a){var r=g(i),t=u(r);return a?b(t):t},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(i){var a=B(this._buff.buffer,i),r=a.length,t;for(this._length+=i.byteLength,t=64;t<=r;t+=64)h(this._hash,d(a.subarray(t-64,t)));return this._buff=t-64<r?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(i){var a=this._buff,r=a.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n,e;for(n=0;n<r;n+=1)t[n>>2]|=a[n]<<(n%4<<3);return this._finish(t,r),e=u(this._hash),i&&(e=b(e)),this.reset(),e},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var i=f.prototype.getState.call(this);return i.buff=w(i.buff),i},f.ArrayBuffer.prototype.setState=function(i){return i.buff=S(i.buff,!0),f.prototype.setState.call(this,i)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(i,a){var r=_(new Uint8Array(i)),t=u(r);return a?b(t):t},f})})(F)),F.exports}var R=N();const H=E(R),T={__name:"uploadceshi",setup(M){const l=x(null),y=x([]),A=s=>{l.value=s.target.files[0]},h=async()=>{if(!l.value)return;const s=2*1024*1024,d=Math.ceil(l.value.size/s),g=new H.ArrayBuffer,_=await l.value.arrayBuffer();g.append(_);const m=g.end();y.value=Array(d).fill(0);for(let u=0;u<d;u++){const v=u*s,S=Math.min(l.value.size,(u+1)*s),w=l.value.slice(v,S),B=new FormData;B.append("file",w),await D.post("http://localhost:3300/upload",B,{headers:{"file-hash":m,"chunk-index":u},onUploadProgress:b=>{y.value[u]=Math.round(b.loaded/b.total*100)}})}await D.post("http://localhost:3300/merge",{fileHash:m,fileName:l.value.name,totalChunks:d}),alert("Upload complete!")};return(s,d)=>(C(),U("div",null,[L("input",{type:"file",onChange:A},null,32),L("button",{onClick:h},"Upload"),(C(!0),U($,null,q(y.value,(g,_)=>(C(),U("div",{key:_}," Chunk "+j(_)+": "+j(g)+"% ",1))),128))]))}};export{T as default};
