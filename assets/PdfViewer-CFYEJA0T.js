import{g as w,d as _,a as k,G as v,r as y,b as x,o as U,c as D,n as P,e as C,f as S,h as p,i as T,w as V,u as $,s as b,F as j,j as B,t as f,_ as R}from"./index-BL72d3rg.js";const E={hylces:"/users"},F=l=>w(E.hylces,l),L=_("user",{state:()=>({token:"",username:""}),actions:{setUser(l,a){this.token=l,this.username=a},clearUser(){this.token="",this.username=""}},persist:{enabled:!0}}),M={class:"pdf-container"},N=["id"],G="/123.pdf",z=1.2,A=k({__name:"PdfViewer",setup(l){const a=L();v.workerSrc=new URL(""+new URL("pdf.worker.min-DRfK9UlP.mjs",import.meta.url).href,import.meta.url).toString();let c=y(null);const i=x([]);U(async()=>{const s=await F({});console.log(s,"res"),a.setUser("123懂得都懂21","43212432"),console.log("用户存好了:",a.token,a.username),g(G),d("小明",18),d.apply({job:"程序员"},["小红",20]),d.call("D","10","20")});function d(s,t){console.log(`我是 ${s}, 今年 ${t} 岁, this是:`,this)}function h(s,t){let e=null,o=0;return function(...n){const r=Date.now();r-o>=t?(console.log("大于十秒了可以执行了"),s.apply(this,n),o=r):(console.log("小于十秒了开个定时器"),clearTimeout(e),e=setTimeout(()=>{s.apply(this,n)},t-(r-o)))}}window.addEventListener("scroll",h(()=>{console.log("滚动触发",Date.now())},1e3));const g=s=>{D({url:s,cMapUrl:"pdfjs-dist/cmaps/",cMapPacked:!0}).promise.then(e=>{c=e,i.value=Array.from({length:e.numPages},(o,n)=>({id:n+1})),console.log(i.value),P(()=>{for(let o=1;o<=2;o++)console.log(o),u(o)})})};function m(s,t){console.log(s,t),u(t)}const u=s=>{c&&c.getPage(s).then(t=>{console.log(c,"pdfDoc",t,"page");const e=document.getElementById(`pdfCanvas${s}`);if(!e)return;const o=e.getContext("2d"),n=t.getViewport({scale:z});e.width=n.width,e.height=n.height,e.style.width=n.width+"px",e.style.height=n.height+"px";const r={canvasContext:o,viewport:n};t.render(r)})};return(s,t)=>(S(),C(j,null,[t[0]||(t[0]=p("div",{style:{height:"2000px"}},null,-1)),p("div",M,[T($(b),{class:"pdf-scroller",items:i.value,"item-size":740,"key-field":"id",emitUpdate:"",onUpdate:m},{default:V(({item:e})=>[B(f(e)+" "+f(e.id)+" ",1),p("canvas",{id:`pdfCanvas${e.id}`,class:"pdf-page"},null,8,N)]),_:1},8,["items"])])],64))}}),K=R(A,[["__scopeId","data-v-f13d1de0"]]);export{K as default};
